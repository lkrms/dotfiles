#!/bin/sh

set -eu

tab=$(printf '\t')

id=$(xprop -root 32x '\t$0' _NET_ACTIVE_WINDOW)
id=${id#*"$tab"}

frame=$(xprop -id "$id" 32c '\t$0\t$1\t$2\t$3' _NET_FRAME_EXTENTS)
stats=$(xwininfo -id "$id" -stats)

printf '%s\n' "${frame#*"$tab"}" "$stats" | awk '
NR == 1                   { l = $1; r = $2; t = $3; b = $4; next }
/Absolute upper-left X:/  { x = $NF; next }
/Absolute upper-left Y:/  { y = $NF; next }
/Width:/                  { w = $NF; next }
/Height:/                 { h = $NF; next }
END                       { w += l + r
                            h += t + b
                            x -= l
                            y -= t
                            printf("%dx%d+%d+%d\n", w, h, x, y) }'
